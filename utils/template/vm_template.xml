<domain type="kvm">  
    <name>{{ domain_name }}</name>
    <!-- <cpu>
        <topology cores="4" sockets="1" threads="4" />
    </cpu> -->
    <uuid>{{ vm_uuid }}</uuid>
    <memory unit="MB">{{ vm_ram }}</memory>
    <currentMemory unit="MB">{{ vm_ram }}</currentMemory>
    <vcpu placement="static">{{ cpu }}</vcpu>
    <os>
        <type>hvm</type>
        <boot dev="hd" />
    </os>
    <features>
        <acpi />
        <apic />
        <pae />
    </features>
    <cpu mode='custom' match='exact'>
    <model fallback='allow'>Broadwell-noTSX</model>
    </cpu>
    <clock offset="utc" />
    <on_poweroff>destroy</on_poweroff>
    <on_reboot>restart</on_reboot>
    <on_crash>restart</on_crash>
    <devices>
        <emulator>/usr/bin/qemu-kvm</emulator>
        <disk device="disk" type="file">
            <driver name="qemu" type="qcow2" />
            <source file="{{ disk }}" />
            <target dev="hda" />
            <address bus="0" controller="0" target="0" type="drive" unit="0" />
        </disk>
        <disk device="cdrom" type="file">
            <source file="{{ config_disk }}" />
            <driver name="qemu" type="raw" />
            <target bus="ide" dev="hdc" />
            <readyonly />
            <address bus="1" controller="0" target="0" type="drive" unit="0" />
        </disk>
        
    <interface type='bridge'>
        <mac address='{{ vm_mac }}'/>
        <source network='default' bridge='{{ bridge_name }}'/>
      <target dev='{{ domain_name }}0'/>
      <model type='rtl8139'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>
     <serial type='pty'>
      <source path='/dev/pts/20'/>
      <target port='0'/>
      <alias name='serial0'/>
    </serial>
    <console type='pty' tty='/dev/pts/20'>
      <source path='/dev/pts/20'/>
      <target type='serial' port='0'/>
      <alias name='serial0'/>
    </console>
    <graphics port="-1" type="vnc" />
    </devices>
</domain>  
